# rupter

**本项目目前处于实验阶段，请勿用于生产环境！**

## 用途

通过ICMP协议在两个（甚至是对称型）NAT后的主机之间通讯

## 原理

受[pwnat](https://github.com/samyk/pwnat/)启发，我想到一种可以借助ICMP协议在两个都处于（对称型）NAT后的设备之间通信的方法，但不确定是否可行，方法如下：

1. 客户端A向一台我们控制的服务器S发送ICMP数据包，服务器受到数据包，但不响应，记录下客户端A的ip和端口。

2. 服务器S将A的IP和端口信息发送给客户端B

3. 客户端B伪装成A到S之间的一个跳点，响应B的request，并在相应数据包的Data部分嵌入要传输的数据

我认为理论上来说这样B就能收到A的数据了，之所以不用TCP或UDP协议，是因为（在我的知识范围内）只有ICMP可以在不作为原始请求目标主机的情况下向原主机响应。

这个方案与pwnat最主要的不同是直接使用ICMP传输数据而非后续用UDP打洞，而且pwnat预先知道一方IP，我这里并不知道。

## 名称由来

这个项目的原理有点像在插嘴，"插嘴的人" 翻译成英语似乎是 *interrupter* ,太长了，于是取*rupter*